# testing
name: test sheets

on:
  workflow_dispatch:
  schedule:
    - cron:  '30 5,17 * * *'

jobs:
  fetch:
    runs-on: ubuntu-latest
    steps:
      - name: Get current date
        id: date
        run: echo "::set-output name=date::$(date +'%Y-%m-%d')"
        
      - id: checkout
        uses: actions/checkout@v3
        
      - id: sheets_fetch_card
        uses: enstars/googlesheet-actions@master
        with:
          sheet-id: 1NdrCTFzbeqN-nvlLzy8YbeBbNwPnHruIe95Q1eE4Iyk
          path: ja/cards-test.json
          
      - uses: "DamianReeves/write-file-action@master"
        with:
          path: ja/cards-test.json
          write-mode: overwrite
          contents: ${{ steps.date.outputs.sheets_fetch_card.result }}
          
      - id: commit
        uses: stefanzweifel/git-auto-commit-action@v4
        with: 
          commit_message: auto-sync-${{ steps.date.outputs.date }}
